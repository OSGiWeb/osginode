(function(){var searchBoxModule=function($){window.Epx=window.Epx||{};window.Epx.Controls=window.Epx.Controls||{};searchControlAnimating=!1;searchControlAnimatingSpeed=400;Epx.Controls.SearchBox=function(){function watermarkFocus(control,defaultValue,cssValue){control.value==defaultValue&&(control.value="");$(control.parentNode.parentNode).addClass(cssValue);document.onkeydown=""}function watermarkBlur(control,defaultValue,cssValue){control.value==""&&(control.value=defaultValue);$(control.parentNode.parentNode).removeClass(cssValue);searchFormContainer=$(control.parentNode.parentNode.parentNode);checkButtonClick=searchFormContainer.find("button").hasClass("hover");checkButtonClick?(searchFormContainer.find("#HeaderSearchTextBox").off("focus"),setTimeout(function(){searchFormContainer.find("#HeaderSearchTextBox").focus().on("onfocus").on("onblur")},0)):(searchFormContainer.find(".metroSearchButton").show(),searchControlAnimating||(formwidth=searchFormContainer.find(".metroSearchButton").outerWidth(!0),searchFormContainer.find("#HeaderSearchTextBox").attr("disabled","disabled"),searchFormContainer.animate({width:formwidth+"px"},searchControlAnimatingSpeed,function(){searchFormContainer.find("form").css("display","none");searchControlAnimating=!1}),searchControlAnimating=!0));document.onkeydown=presskey}function watermarkOnSubmit(control,defaultValue,cssValue){control.value==defaultValue&&(control.value="",control.className=cssValue)}function metroButtonClick(metroButton){searchFormContainer=$(metroButton.parentNode.parentNode);searchFormContainer.find("input").val("");animating=!1;searchControlAnimating||(formWidth=searchFormContainer.find("form").width(),searchFormContainer.find("#HeaderSearchTextBox").removeAttr("disabled"),searchFormContainer.find("form").css("display","block"),searchFormContainer.animate({width:formWidth+"px"},searchControlAnimatingSpeed,function(){$(metroButton).hide();searchFormContainer.find("#HeaderSearchTextBox").off("focus").focus().on("onfocus").on("onblur");searchControlAnimating=!1}),searchControlAnimating=!0);$(metroButton.parentNode).find("form").css("display","inline-block")}function presskey(evt){if(evt=evt?evt:event?event:null,evt&&evt.keyCode==84){var target=evt.srcElement!=null?evt.srcElement:evt.target;if(target.tagName.toLowerCase()=="input"||target.tagName.toLowerCase()=="textarea"||evt.ctrlKey||evt.altKey)return}}return{watermarkFocus:watermarkFocus,watermarkBlur:watermarkBlur,watermarkOnSubmit:watermarkOnSubmit,metroButtonClick:metroButtonClick}}();$(document).ready(function(){searchFormContainer=$("#Fragment_SearchBox");searchform=$("#Fragment_SearchBox #HeaderSearchForm");searchInput=$("#Fragment_SearchBox #HeaderSearchTextBox");searchButton=$("#Fragment_SearchBox #HeaderSearchButton");searchMetroButton=$("#Fragment_SearchBox .metroSearchButton");searchFormContainer.css("width",searchMetroButton.outerWidth(!0));$("html > body.IE.Edge").length||!$("html > body.IE").length?searchform.css("width",searchInput.outerWidth(!0)+searchButton.outerWidth(!0)+"px"):searchform.css("width",searchInput.width()+searchButton.outerWidth(!0)+"px");$(searchButton).mouseenter(function(){$(this).addClass("hover")}).mouseleave(function(){$(this).removeClass("hover")});$(document).keyup(function(e){searchInput.is(":focus")&&e.keyCode==27&&(searchButton.removeClass("hover"),searchInput.trigger("blur"));searchMetroButton.is(":focus")&&e.keyCode==13&&searchMetroButton.trigger("click")});$(window).resize(function(){Epx.Controls.SearchBox.watermarkBlur($("#HeaderSearchTextBox")[0],"","SearchBoxOnFocus")})})};typeof define=="function"&&window.mtpsAmd?define("searchBox",["jquery"],function($){return searchBoxModule($)}):searchBoxModule($)})();